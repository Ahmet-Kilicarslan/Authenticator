<div class="reset-container">
  <div class="reset-card">

    <!-- Header -->
    <div class="reset-header">
      <div class="logo">
        <img src="/lubiv-dithered.png" alt="logo" class="logo-img">
      </div>
      <h2>Reset Password</h2>
      <p>Enter your new password</p>
    </div>

    <!-- Form (shown when not success) -->
    @if (!success) {
      <form class="reset-form" (ngSubmit)="handleSubmit()" novalidate>

        <!-- New Password -->
        <div class="form-group">
          <label for="newPassword" class="form-label">New Password</label>
          <div class="input-wrapper password-wrapper">
            <input
              [type]="showPassword ? 'text' : 'password'"
              id="newPassword"
              name="newPassword"
              [(ngModel)]="newPassword"
              placeholder="Enter new password"
              required>
            <button
              type="button"
              class="password-toggle"
              (click)="togglePassword()">
              <span class="toggle-text">{{ showPassword ? 'HIDE' : 'SHOW' }}</span>
            </button>
          </div>
          <span class="error-message" [class.show]="passwordError">{{ passwordError }}</span>
        </div>

        <!-- Confirm Password -->
        <div class="form-group">
          <label for="confirmPassword" class="form-label">Confirm Password</label>
          <div class="input-wrapper password-wrapper">
            <input
              [type]="showConfirmPassword ? 'text' : 'password'"
              id="confirmPassword"
              name="confirmPassword"
              [(ngModel)]="confirmPassword"
              placeholder="Confirm new password"
              required>
            <button
              type="button"
              class="password-toggle"
              (click)="toggleConfirmPassword()">
              <span class="toggle-text">{{ showConfirmPassword ? 'HIDE' : 'SHOW' }}</span>
            </button>
          </div>
          <span class="error-message" [class.show]="confirmError">{{ confirmError }}</span>
        </div>

        <!-- Submit Button -->
        <button type="submit" class="btn-primary" [class.loading]="isLoading">
          <span class="btn-text">RESET PASSWORD</span>
          <div class="btn-loader">
            <div class="loader-bar"></div>
            <div class="loader-bar"></div>
            <div class="loader-bar"></div>
          </div>
        </button>
      </form>

      <!-- Back to Login -->
      <div class="back-link">
        <a routerLink="/Login" class="nav-link">← Back to login</a>
      </div>
    }

    <!-- Success Message (shown after reset) -->
    @if (success) {
      <div class="success-message show">
        <div class="success-icon">✓</div>
        <h3>Password Reset!</h3>
        <p>Redirecting to login...</p>
      </div>
    }

  </div>
</div>
